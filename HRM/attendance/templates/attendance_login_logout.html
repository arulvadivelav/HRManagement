{% extends "base.html" %}
{% load static %}

{% block bodyContent %}
<div class="mt-5 d-flex flex-column justify-content-center align-items-center">
    {% if user_log_status %}
        <div class="card border-0" style="width: 350px; display:block;" id="logIn">
            <div class="card-body d-flex flex-column justify-content-center align-items-center">
                <div>
                    <img class="card-img-bottom" src="{% static 'images/timein.jpg' %}" alt="profile" style="width:100%;">
                </div>
                <div class="d-flex">
                    <form onsubmit="event.preventDefault(); attendanceLogin(true);">
                        {% csrf_token %}
                        <input type="submit" class="btn btn-primary" value="Login">
                    </form>
                </div>
            </div>
        </div>
    {% else %}
        <div class="card border-0" style="width: 350px; display:block;" id="logOut">
            <div class="card-body d-flex flex-column justify-content-center align-items-center">
                <div>
                    <img class="card-img-bottom" src="{% static 'images/timeout.jpg' %}" alt="profile" style="width:100%;">
                </div>
                <div class="d-flex">
                    <form onsubmit="event.preventDefault(); attendanceLogin(false);">
                        {% csrf_token %}
                        <input type="submit" class="btn btn-primary" value="Logout">
                    </form>
                </div>
            </div>
        </div>
    {% endif %}
    <div class="mt-3" style="color:#636c59">
       <h4>❝ The only way to do <b>Great work</b> is to <b>LOVE</b> what you Do❞</h4>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    function attendanceLogin(log_status) {
        let logInDiv = document.querySelector("#logIn");
        let logOutDiv = document.querySelector("#logOut");
        const url = `/attendance/attendance_login`;
        const data = {
            "log_status": log_status
        };
        fetch(url, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": "{{ csrf_token }}"
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(data => {
            if (log_status) {
                logInDiv.style.display = "block";
            } else {
                logOutDiv.style.display = "block";
            }
            location.reload();
        })
        .catch(error => console.error('Error:', error));
    }
</script>
{% endblock %}
